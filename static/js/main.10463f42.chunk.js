(this.webpackJsonpohditor=this.webpackJsonpohditor||[]).push([[0],{20:function(e,n,t){},21:function(e,n,t){},22:function(e,n,t){},26:function(e,n,t){},27:function(e,n,t){},28:function(e,n,t){"use strict";t.r(n);var i=t(0),c=t.n(i),r=t(14),o=t.n(r),a=(t(20),t(5)),l=(t(21),t(8)),s={listed:[],editorContent:""},d=function(e,n){switch(n.type){case"EDITOR_UPDATE":return Object(l.a)(Object(l.a)({},e),{},{editorContent:n.value});case"LOAD_SCENARIO":return Object(l.a)(Object(l.a)({},e),{},{scenario:n.value});default:return e}},u=Object(i.createContext)({}),b=function(e,n,t){return{kind:"leaf",id:e,label:n,contents:t}},j=function(e,n,t,i){return{kind:"node",id:e,label:n,contents:t,children:i}},h=function(e){throw new Error("unreachable")},f=t(30),v=t(32),x=t(31),O=(t(22),t(3)),g=function(e){return Object(O.jsx)(f.a,{className:"foldable-list-root",children:e.children})},m=function(e){var n=Object(i.useState)(!1),t=Object(a.a)(n,2),r=t[0],o=t[1],l=Object(O.jsx)("div",{className:"fl-body",children:c.a.Children.map(e.children,(function(e){return Object(O.jsx)("div",{className:"fl-text",children:e})}))}),s=r?Object(O.jsx)(x.a,{}):Object(O.jsx)(x.b,{});return Object(O.jsxs)(v.a,{className:"fl-item",children:[Object(O.jsxs)("div",{className:"fl-header",onClick:function(){o(!r)},children:[s,e.header]}),r?l:Object(O.jsx)("div",{})]})},p=function e(n){return"node"===n.kind?Object(O.jsx)(g,{children:Object(O.jsx)(m,{header:n.label,children:n.children.map((function(n){return e(n)}))})}):"leaf"===n.kind?Object(O.jsx)("div",{children:n.label}):void h()},w=function(e){var n,t=null===(n=Object(i.useContext)(u).state.scenario)||void 0===n?void 0:n.tree;return void 0===t?Object(O.jsx)("div",{children:"no data"}):Object(O.jsx)("div",{children:p(t)})},N=t(33),k=t(34),C=t(35),S=(t(26),function(e){var n,t=c.a.useState("0"),i=Object(a.a)(t,2),r=i[0],o=i[1],l=c.a.useState(50),s=Object(a.a)(l,2),d=s[0],u=s[1],b=function(e){var n;return(null===(n=e.match(/(\r|\n)/g))||void 0===n?void 0:n.length)||1};return Object(O.jsx)("div",{className:"bx--grid line-numbered-text-area-root",children:Object(O.jsxs)("div",{className:"bx--row line-numbered-text-area-row",children:[Object(O.jsx)("div",{className:"bx--col bx--col-sm-1 bx--col-md-1",children:Object(O.jsx)(C.a,{labelText:"",value:r,style:{height:d.toString()+"px",pointerEvents:"none"},className:"line-number"})}),Object(O.jsx)("div",{className:"bx--col bx--col-sm-3 bx--col-md-7",children:Object(O.jsx)(C.a,{labelText:"",wrap:"off",value:null===(n=e.children)||void 0===n?void 0:n.toString(),style:{height:d.toString()+"px"},onChange:function(n){var t,i=b(n.target.value)+1,c=Array.from(Array(i).keys()).map((function(e){return e.toString()}));o(c.join("\n")),u(n.target.scrollHeight),null===(t=e.onChange)||void 0===t||t.call(e,n)}})})]})})}),y=(t(27),function(e){var n=Object(i.useContext)(u);return Object(O.jsxs)("div",{className:"bx--grid",children:[Object(O.jsx)("div",{className:"bx--grid-row",children:Object(O.jsx)(A,{})}),Object(O.jsx)("div",{className:"bx--grid-row",children:Object(O.jsx)(S,{onChange:function(e){n.dispatch({type:"EDITOR_UPDATE",value:e.target.value})},children:n.state.editorContent})})]})}),A=function(e){var n,t=Object(i.useContext)(u),r=E(t.state.opened)(null===(n=t.state.scenario)||void 0===n?void 0:n.tree)||[""];return Object(O.jsx)(N.a,{children:c.a.Children.map(r,(function(e){return Object(O.jsx)(k.a,{children:e})}))})},E=function e(n){return function(t){if(void 0!==n&&void 0!==t){if("node"===t.kind){var i=t.children.map(e(n)).find((function(e){return void 0!==e}));return null===i||void 0===i?void 0:i.concat([t.label])}if("leaf"===t.kind){if(t.id===n)return[t.label]}else h()}}},T={fileName:"Novel Title",tree:j("0","root","none",[b("1","meta-info",""),j("2","prologue","none",[b("4","page1",""),b("5","page2","")]),j("3","chapter 1","",[b("6","page1",""),b("7","page2","")])])};var W=function(){var e=Object(i.useReducer)(d,s),n=Object(a.a)(e,2),t=n[0],c=n[1];return Object(i.useEffect)((function(){c({type:"LOAD_SCENARIO",value:T})}),[]),Object(O.jsx)(u.Provider,{value:{state:t,dispatch:c},children:Object(O.jsx)("div",{className:"App",children:Object(O.jsx)("div",{className:"bx--grid bx--grid--full-width bx--grid--condensed",children:Object(O.jsxs)("div",{className:"bx--row",children:[Object(O.jsx)("div",{className:"bx--col bx--col-sm-1 bx--col-md-1",children:Object(O.jsx)(w,{})}),Object(O.jsx)("div",{className:"bx--col bx--col-sm-3 bx--col-md-7",children:Object(O.jsx)(y,{})})]})})})})},D=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function P(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var I=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,36)).then((function(n){var t=n.getCLS,i=n.getFID,c=n.getFCP,r=n.getLCP,o=n.getTTFB;t(e),i(e),c(e),r(e),o(e)}))};o.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(W,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/ohditor",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("/ohditor","/service-worker.js");D?(!function(e,n){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var i=t.headers.get("content-type");404===t.status||null!=i&&-1===i.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):P(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):P(n,e)}))}}(),I()}},[[28,1,2]]]);
//# sourceMappingURL=main.10463f42.chunk.js.map